# UIGF/SRGF 抽卡记录分离工具

一个用于处理原神（UIGF格式）和崩坏：星穹铁道（SRGF格式）抽卡记录的桌面应用程序。该工具可以将标准的UIGF/SRGF格式文件按照不同的抽卡类型（gacha_type）分离成多个独立的JSON文件。

-------

自用
本项目为纯AI生成，文本有问题也懒得改能用就行

## 功能特性

- 🎮 **双游戏支持**：支持原神（UIGF格式）和崩坏：星穹铁道（SRGF格式）
- 📁 **智能分离**：按照gacha_type自动分离抽卡记录到独立文件
- 🔄 **类型合并**：原神400类型自动合并到301类型（限定角色池）
- 🖥️ **图形界面**：简洁易用的中文图形用户界面
- 📊 **进度显示**：实时显示处理进度和详细统计信息
- ⚠️ **错误处理**：完善的错误提示和处理机制
- 🔍 **格式验证**：自动验证输入文件格式的有效性

## 支持的抽卡类型

### 原神 (UIGF)
- `100.json` - 新手祈愿
- `200.json` - 常驻祈愿
- `301.json` - 限定角色祈愿（包含400类型记录）
- `302.json` - 武器祈愿
- `500.json` - 集录祈愿

### 崩坏：星穹铁道 (SRGF)
- `1.json` - 群星跃迁
- `2.json` - 始发跃迁
- `11.json` - 角色活动跃迁
- `12.json` - 光锥活动跃迁
- `21.json` - 联动跃迁

## 系统要求

- **操作系统**：Windows 7/8/10/11, macOS 10.12+, Linux
- **Python版本**：Python 3.7 或更高版本
- **依赖库**：仅使用Python标准库，无需安装额外依赖

## 安装指南

### 方法一：直接运行Python脚本

1. **克隆或下载项目**
   ```bash
   git clone https://github.com/maqibg/yunzai-uigf-splitte.git
   cd yunzai-uigf-splitte
   ```

2. **确保Python环境**
   ```bash
   python --version  # 确保版本 >= 3.7
   ```

3. **运行程序**
   ```bash
   python main.py
   ```

### 方法二：使用打包的可执行文件

1. 下载对应操作系统的可执行文件
2. 双击运行即可

## 使用说明

### 基本使用流程

1. **启动程序**
   - 运行 `python main.py` 或双击可执行文件

2. **选择游戏类型**
   - 选择"原神 (UIGF)"或"崩坏：星穹铁道 (SRGF)"

3. **选择输入文件**
   - 点击"选择文件"按钮
   - 选择对应游戏的抽卡记录JSON文件
   - 程序会自动验证文件格式

4. **选择输出目录**
   - 点击"选择目录"按钮
   - 选择保存分离后文件的目录
   - 程序会验证目录权限和磁盘空间

5. **开始转换**
   - 点击"开始转换"按钮
   - 观察进度条和状态信息
   - 转换完成后查看统计结果

### 输入文件格式

程序支持标准的UIGF/SRGF格式文件，基本结构如下：

```json
{
  "info": {
    "uid": "用户ID",
    "lang": "zh-cn",
    "export_time": "导出时间",
    "uigf_version": "版本号"  // 原神
    // 或 "srgf_version": "版本号"  // 崩铁
  },
  "list": [
    {
      "gacha_type": "抽卡类型",
      "time": "抽卡时间",
      "name": "物品名称",
      "item_type": "物品类型",
      "rank_type": "稀有度",
      "id": "记录ID",
      "uid": "用户ID",
      "count": "数量",
      "lang": "语言",
      "item_id": "物品ID"
    }
  ]
}
```

### 输出文件格式

每个gacha_type对应一个JSON文件，包含该类型的所有抽卡记录：

```json
[
  {
    "uid": "用户ID",
    "gacha_type": "抽卡类型",
    "item_id": "物品ID",
    "count": "数量",
    "time": "抽卡时间",
    "name": "物品名称",
    "lang": "语言",
    "item_type": "物品类型",
    "rank_type": "稀有度",
    "id": "记录ID"
  }
]
```

## 常见问题解答

### Q: 程序提示"文件格式错误"怎么办？
**A:** 请确认：
- 文件是有效的JSON格式
- 文件包含必需的`info`和`list`字段
- 选择了正确的游戏类型（原神选UIGF，崩铁选SRGF）
- 文件来源可靠，没有被损坏

### Q: 为什么原神的400类型记录出现在301.json文件中？
**A:** 这是正常的。根据原神的抽卡机制，400类型（限定角色复刻）会自动合并到301类型（限定角色），因为它们共享保底计数。

### Q: 程序提示"权限不足"怎么办？
**A:** 尝试以下解决方案：
- 以管理员身份运行程序
- 选择有写入权限的输出目录
- 检查防病毒软件是否阻止了文件操作

### Q: 转换后的文件可以用于什么？
**A:** 分离后的文件可以用于：
- 抽卡数据分析和统计
- 导入其他抽卡分析工具
- 备份特定类型的抽卡记录
- 数据可视化和图表制作

### Q: 程序支持哪些操作系统？
**A:** 程序基于Python和tkinter开发，支持：
- Windows 7/8/10/11
- macOS 10.12+
- Linux（需要安装python3-tk）

### Q: 如何获取UIGF/SRGF格式的抽卡记录文件？
**A:** 可以使用以下工具导出：
- 椰羊 (cocogoat.work)
- 应急食品 (github.com/sunfkny/genshin-gacha-export)
- Starward (github.com/Scighost/Starward)
- 其他支持UIGF/SRGF标准的工具

### Q: 程序处理大文件时很慢怎么办？
**A:** 这是正常现象，程序会：
- 显示实时进度
- 每100条记录更新一次进度
- 在后台线程处理，不会冻结界面
- 大文件（>10000条记录）可能需要几分钟

### Q: 转换失败了怎么办？
**A:** 请检查：
- 输入文件是否完整且未损坏
- 输出目录是否有足够的磁盘空间
- 是否有足够的系统内存
- 查看状态信息中的具体错误提示

## 技术说明

### 项目结构
```
uigf-gacha-splitter/
├── main.py              # 主程序和GUI界面
├── file_processor.py    # 文件处理和数据转换
├── game_config.py       # 游戏配置和类型映射
├── utils.py             # 工具函数和验证逻辑
├── requirements.txt     # 依赖说明
└── README.md           # 项目文档
```

### 核心特性
- **异步处理**：使用多线程避免界面冻结
- **内存优化**：流式处理大文件，避免内存溢出
- **错误恢复**：完善的错误处理和用户提示
- **数据完整性**：严格的格式验证和数据校验

### 开发环境
- Python 3.7+
- tkinter (Python标准库)
- 无外部依赖

### 构建可执行文件
```bash
# 安装PyInstaller
pip install pyinstaller

# 构建可执行文件
pyinstaller --onefile --windowed --name="UIGF抽卡记录分离工具" main.py
```

## 许可证

本项目采用 MIT 许可证。详见 LICENSE 文件。

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 更新日志

### v1.0.0
- 初始版本发布
- 支持原神和崩坏：星穹铁道
- 完整的GUI界面
- 错误处理和进度显示

---

如果您在使用过程中遇到问题，请查看常见问题解答或提交Issue。