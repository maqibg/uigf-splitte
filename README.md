# UIGF/SRGF 抽卡记录处理工具 v1.1

一个用于处理原神（UIGF格式）和崩坏：星穹铁道（SRGF格式）抽卡记录的桌面应用程序。该工具提供文件分离、合并和修复三大核心功能。

-------

自用
本项目为纯AI生成，文本有问题也懒得改能用就行

![PixPin_2025-07-25_21-02-25](https://github.com/user-attachments/assets/0130b382-910c-4975-92e1-493644397e19)
![PixPin_2025-07-25_21-02-41](https://github.com/user-attachments/assets/f99c8a8a-7ddc-434d-960e-07fbb8bd8dbe)
![PixPin_2025-07-25_21-02-52](https://github.com/user-attachments/assets/7a18e542-4855-4720-9195-f8efa48f1d83)



## 功能特性

- 🎮 **双游戏支持**：支持原神（UIGF格式）和崩坏：星穹铁道（SRGF格式）。
- 📂 **智能分离**：按照 `gacha_type` 自动分离抽卡记录到独立文件。
- ✨ **文件修复**：自动检测并修复格式不规范或损坏的UIGF/SRGF文件。
- 🔗 **文件合并**：将两个相同UID的记录文件合并为一个，并智能去重。
- 🖥️ **全新UI**：采用现代化两栏式布局，操作流程更清晰。
- 📊 **进度显示**：实时显示处理进度和详细统计信息。
- ⚠️ **错误处理**：完善的错误提示和处理机制。
- 🔍 **格式验证**：在选择文件时自动验证格式有效性。

## 支持的抽卡类型

### 原神 (UIGF)
- `100.json` - 新手祈愿
- `200.json` - 常驻祈愿
- `301.json` - 限定角色祈愿（包含400类型记录）
- `302.json` - 武器祈愿
- `500.json` - 集录祈愿

### 崩坏：星穹铁道 (SRGF)
- `1.json` - 群星跃迁
- `2.json` - 始发跃迁
- `11.json` - 角色活动跃迁
- `12.json` - 光锥活动跃迁
- `21.json` - 联动跃迁

## 系统要求

- **操作系统**：Windows 7/8/10/11, macOS 10.12+, Linux
- **Python版本**：Python 3.7 或更高版本
- **依赖库**：仅使用Python标准库，无需安装额外依赖

## 安装指南

### 方法一：直接运行Python脚本

1. **克隆或下载项目**
   ```bash
   git clone https://github.com/maqibg/yunzai-uigf-splitte.git
   cd yunzai-uigf-splitte
   ```

2. **确保Python环境**
   ```bash
   python --version  # 确保版本 >= 3.7
   ```

3. **运行程序**
   ```bash
   python main.py
   ```

### 方法二：使用打包的可执行文件

1. 从 **Releases** 页面下载对应操作系统的可执行文件。
2. 双击运行即可。

## 使用说明

新版v1.1采用了两栏式布局，左侧为控制区，右侧为信息和状态区。

### 基本使用流程

1. **选择功能**：在左上角的“功能选择”区选择 **分离**、**合并** 或 **修复**。
2. **选择游戏**：选择“原神 (UIGF)”或“崩坏：星穹铁道 (SRGF)”。
3. **选择文件和目录**：
    - **分离/修复**：选择一个输入文件和输出目录。
    - **合并**：选择两个输入文件和输出目录。
4. **开始操作**：点击“开始...”按钮，程序将在后台执行。
5. **查看结果**：在右侧“状态日志”和弹出的结果窗口中查看详细信息。

### 功能详解

#### 分离 (Split)
- **用途**：将单个完整的抽卡记录文件按卡池类型分割成多个小文件。
- **流程**：
  1. 功能选择 `分离`。
  2. 选择游戏类型。
  3. 选择需要分离的 `UIGF/SRGF` 文件。
  4. 选择一个用于存放结果的输出目录。
  5. 点击 `开始分离`。

#### 修复 (Repair)
- **用途**：修复因各种原因损坏或格式不标准的记录文件。可修复问题包括：
  - 缺失必需字段（如 `uid`, `id`）
  - 数据类型错误（如 `id` 不是数字）
  - JSON格式损坏
  - 重复的记录ID
- **流程**：
  1. 功能选择 `修复`。
  2. 选择游戏类型。
  3. 选择需要修复的文件。
  4. 选择输出目录。
  5. 点击 `开始修复`。修复报告将保存在输出目录中。

#### 合并 (Merge)
- **用途**：合并两个来自同一UID的记录文件，例如合并来自不同设备或不同导出工具的记录。
- **流程**：
  1. 功能选择 `合并`。
  2. 选择游戏类型。
  3. 依次选择 `第一个文件` 和 `第二个文件`。程序会自动校验两个文件的UID是否一致。
  4. 选择输出目录。
  5. (可选) 勾选 `合并后自动分离`，可以在合并完成后直接对结果执行分离操作。
  6. 点击 `开始合并`。

## 常见问题解答

### Q: 程序提示"文件格式错误"怎么办？
**A:** 请确认：
- 文件是有效的JSON格式。
- 文件包含必需的`info`和`list`字段。
- 选择了正确的游戏类型。
- 如果使用 **修复** 功能，即使JSON格式损坏，程序也会尝试修复。

### Q: 为什么原神的400类型记录出现在301.json文件中？
**A:** 这是正常的。根据原神的抽卡机制，400类型（限定角色复刻）会自动合并到301类型（限定角色），因为它们共享保底计数。

### Q: 合并时提示“UID不一致”怎么办？
**A:** 合并功能仅支持合并属于同一个玩家（UID相同）的记录文件。请检查您选择的两个文件是否来自同一个账号。

## 技术说明

### 项目结构
```
uigf-gacha-splitter/
├── main.py              # 主程序和GUI界面
├── file_processor.py    # 分离功能核心逻辑
├── file_merger.py       # 合并功能核心逻辑
├── file_repair.py       # 修复功能核心逻辑
├── game_config.py       # 游戏配置和类型映射
├── github_integration.py# GitHub相关操作
├── utils.py             # 工具函数
├── requirements.txt     # 依赖说明
└── README.md            # 项目文档
```

### 构建可执行文件
```bash
# 安装PyInstaller
pip install pyinstaller

# 构建可执行文件
pyinstaller --onefile --windowed --name="UIGF抽卡记录处理工具" main.py
```

## 许可证

本项目采用 MIT 许可证。

## 更新日志

### v1.1.0
- **UI重构**：完全重写为两栏式布局，优化用户体验。
- **新增功能：文件修复**：自动检测和修复损坏的记录文件。
- **新增功能：文件合并**：支持合并两个相同UID的记录文件，并智能去重。
- **优化**：改进了文件验证和错误提示。
- **优化**：重构了内部代码，分离了UI和逻辑。

### v1.0.0
- 初始版本发布
- 支持原神和崩坏：星穹铁道
- 提供记录分离功能

---

如果您在使用过程中遇到问题，请查看常见问题解答或提交Issue。
